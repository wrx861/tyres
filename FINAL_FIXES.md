# –§–∏–Ω–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. –õ–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏–º–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –í –ª–æ–≥–∞—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –∏–º—è (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∞)

**–†–µ—à–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω `products.py` - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç username –ò–õ–ò first_name
- –û–±–Ω–æ–≤–ª–µ–Ω `cart.py` - –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
- Fallback: –µ—Å–ª–∏ –Ω–µ—Ç –Ω–∏ username –Ω–∏ first_name, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "User_XXXX" (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã ID)

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `/app/backend/routers/products.py` - search_tires –∏ search_disks
- `/app/backend/routers/cart.py` - cart_add –∏ cart_remove

### 2. –ö–æ—Ä–∑–∏–Ω–∞ —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ –ø—Ä–æ–ø–∞–¥–∞–ª–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã –≤ localStorage –±—Ä–∞—É–∑–µ—Ä–∞
- –ö–æ—Ä–∑–∏–Ω–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ö–æ—Ä–∑–∏–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `/app/frontend/src/App.js` - –¥–æ–±–∞–≤–ª–µ–Ω useEffect –¥–ª—è localStorage

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ). –î–ª—è –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –Ω—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º API (—É–∂–µ –≥–æ—Ç–æ–≤–æ, –Ω–æ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ).

### 3. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã:

### 1. Telegram –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (FATAL)
**–°—Ç–∞—Ç—É—Å:** –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ supervisor –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω:** –¢–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start –≤ Telegram –±–æ—Ç–µ

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó –±–æ—Ç–∞:**
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö (—á–µ—Ä–µ–∑ backend)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö (—á–µ—Ä–µ–∑ backend)
- ‚úÖ –í—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```bash
# –î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ supervisor
sudo nano /etc/supervisor/conf.d/tyres.conf

# –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ü–∏—é:
[program:tyres-telegram-bot]
command=python3 telegram_bot.py
directory=/opt/tyres-app
user=root
autostart=true
autorestart=true
stderr_logfile=/var/log/tyres-telegram-bot.err.log
stdout_logfile=/var/log/tyres-telegram-bot.out.log
environment=TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω",ADMIN_TELEGRAM_ID="–≤–∞—à_id",WEBAPP_URL="https://–≤–∞—à_–¥–æ–º–µ–Ω"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ supervisor
sudo supervisorctl reread
sudo supervisorctl update
sudo supervisorctl start tyres-telegram-bot
```

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /opt/tyres-app

# 2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ —Å GitHub
git pull origin main

# 3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ frontend
cd /opt/tyres-app/frontend
yarn build

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
sudo supervisorctl restart tyres-backend
sudo systemctl restart nginx
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### –¢–µ—Å—Ç 1: –õ–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å –∏–º–µ–Ω–∞–º–∏
1. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫ —à–∏–Ω
2. –ó–∞–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
3. –î–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è: –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞ (username –∏–ª–∏ first_name) + –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞

### –¢–µ—Å—Ç 2: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
1. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
2. –ó–∞–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É F5)
3. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–Ω–æ–≤–∞
4. –¢–æ–≤–∞—Ä –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è –≤ –∫–æ—Ä–∑–∏–Ω–µ

### –¢–µ—Å—Ç 3: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–ñ–ï –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢

## üìä –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å:

### –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é:
- ‚úÖ –ü–æ–∏—Å–∫ —à–∏–Ω –∏ –¥–∏—Å–∫–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º API
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å –∏–º–µ–Ω–∞–º–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã (localStorage)
- ‚úÖ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å —Å 5 —Ç–∞–±–∞–º–∏
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ backend

### –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- ‚ö†Ô∏è Telegram –±–æ—Ç /start (–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–∑–∂–µ)
- ‚ö†Ô∏è –°–µ—Ä–≤–µ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ—Ä–∑–∏–Ω—ã (API –≥–æ—Ç–æ–≤)

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ö–æ—Ä–∑–∏–Ω–∞:** –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (localStorage) —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è 95% —Å–ª—É—á–∞–µ–≤
2. **Telegram –±–æ—Ç:** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /start
3. **–ë–µ–∫–∞–ø—ã:** –†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π—Ç–µ –±–µ–∫–∞–ø—ã MongoDB
4. **SSL:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (certbot renew --dry-run)

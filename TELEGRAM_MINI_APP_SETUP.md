# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Mini App –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã –¥–æ–º–µ–Ω–∞

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: "–ü—Ä–∏–≤–µ—Ç, –ì–æ—Å—Ç—å!"

–ü–æ—Å–ª–µ —Å–º–µ–Ω—ã –¥–æ–º–µ–Ω–∞ –Ω–∞ HTTPS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ü—Ä–∏–≤–µ—Ç, –ì–æ—Å—Ç—å!" –≤–º–µ—Å—Ç–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü—Ä–∏—á–∏–Ω–∞:** URL Mini App –≤ BotFather —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ä—ã–π –¥–æ–º–µ–Ω –∏–ª–∏ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –û–±–Ω–æ–≤–∏—Ç—å URL –≤ BotFather

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ BotFather

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ **@BotFather**
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/mybots`

### –®–∞–≥ 2: –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞

1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–º—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞
2. –í—ã–±–µ—Ä–∏—Ç–µ **"Bot Settings"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **"Menu Button"**

### –®–∞–≥ 3: –ò–∑–º–µ–Ω–∏—Ç–µ URL

1. –ù–∞–∂–º–∏—Ç–µ **"Configure menu button"** –∏–ª–∏ **"Edit menu button URL"**
2. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π URL:
   ```
   https://tyres.shopmarketbot.ru
   ```
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é (–æ–±—ã—á–Ω–æ –≤–Ω–∏–∑—É)
3. –û—Ç–∫—Ä–æ–µ—Ç—Å—è Mini App —Å –Ω–æ–≤—ã–º URL
4. –¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–∞—à–µ –∏–º—è –≤–º–µ—Å—Ç–æ "–ì–æ—Å—Ç—å"

---

## üîç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (—á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã)

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Menu Button:

```
/mybots
‚Üí –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
‚Üí Bot Settings
‚Üí Menu Button
‚Üí Edit Menu Button URL
‚Üí –í–≤–µ–¥–∏—Ç–µ: https://tyres.shopmarketbot.ru
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Web App (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è inline keyboard):

–í –∫–æ–¥–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å inline –∫–Ω–æ–ø–∫–∏):

```python
from telegram import InlineKeyboardButton, InlineKeyboardMarkup, WebAppInfo

keyboard = [
    [InlineKeyboardButton(
        "üõí –û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω", 
        web_app=WebAppInfo(url="https://tyres.shopmarketbot.ru")
    )]
]
reply_markup = InlineKeyboardMarkup(keyboard)
```

---

## üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 1. URL –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS

```bash
curl -I https://tyres.shopmarketbot.ru

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: HTTP/2 200
```

### 2. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://tyres.shopmarketbot.ru –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–º–æ–∫ üîí –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
3. –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç Let's Encrypt

### 3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
curl https://tyres.shopmarketbot.ru/api/health

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"healthy","database":"connected"}
```

### 4. Telegram Web App —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é
3. –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
   ```javascript
   window.Telegram.WebApp.initDataUnsafe.user
   // –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –æ–±—ä–µ–∫—Ç —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   ```

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –í—Å—ë –µ—â–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ì–æ—Å—Ç—å"

**–ü—Ä–∏—á–∏–Ω–∞:** –ö—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ Telegram

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–∫—Ä–æ–π—Ç–µ Mini App
2. –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä–æ–π—Ç–µ Telegram
3. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram —Å–Ω–æ–≤–∞
4. –û—Ç–∫—Ä–æ–π—Ç–µ Mini App

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Mini App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** URL –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL
curl -I https://tyres.shopmarketbot.ru

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
openssl s_client -connect tyres.shopmarketbot.ru:443 -servername tyres.shopmarketbot.ru < /dev/null
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –û—à–∏–±–∫–∞ "Mixed Content"

**–ü—Ä–∏—á–∏–Ω–∞:** –ß–∞—Å—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ HTTP

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ REACT_APP_BACKEND_URL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç https://
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `/opt/tyres-app/frontend/.env`
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `REACT_APP_BACKEND_URL=https://tyres.shopmarketbot.ru`

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–ü—Ä–∏—á–∏–Ω–∞:** Backend –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ backend
sudo supervisorctl status

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -50 /var/log/tyres-backend.err.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
sudo supervisorctl restart backend
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Telegram Bot

### –í BotFather –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
Bot Name: 4tochki Tyres Bot (–∏–ª–∏ –≤–∞—à–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)
Username: @shoptyresbot (–∏–ª–∏ –≤–∞—à username)
Menu Button URL: https://tyres.shopmarketbot.ru
Description: –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —à–∏–Ω –∏ –¥–∏—Å–∫–æ–≤
About: –ü–æ–¥–±–æ—Ä –∏ –∑–∞–∫–∞–∑ —à–∏–Ω/–¥–∏—Å–∫–æ–≤ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π
```

### –í –∫–æ–¥–µ –±–æ—Ç–∞ (backend/services/telegram_bot.py):

```python
# –ö–Ω–æ–ø–∫–∞ –≤ –º–µ–Ω—é –±–æ—Ç–∞
keyboard = [
    [InlineKeyboardButton(
        "üõí –û—Ç–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω",
        web_app=WebAppInfo(url="https://tyres.shopmarketbot.ru")
    )]
]
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Mini App

### HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

Telegram —Ç—Ä–µ–±—É–µ—Ç HTTPS –¥–ª—è Mini Apps:
- ‚úÖ `https://tyres.shopmarketbot.ru` - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå `http://tyres.shopmarketbot.ru` - –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –í–∞–ª–∏–¥–∞—Ü–∏—è initData

Backend –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Telegram:

```python
# backend/routers/auth.py
@router.post("/telegram")
async def authenticate_telegram(user_data: UserCreate):
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] URL –≤ BotFather –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ `https://tyres.shopmarketbot.ru`
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω
- [ ] Backend –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS
- [ ] Frontend —Å–æ–±—Ä–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º REACT_APP_BACKEND_URL
- [ ] Mini App –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Telegram
- [ ] –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–º–µ—Å—Ç–æ "–ì–æ—Å—Ç—å"
- [ ] –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É
- [ ] –ú–æ–∂–Ω–æ –æ—Ñ–æ—Ä–º–ª—è—Ç—å –∑–∞–∫–∞–∑—ã

---

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

```
https://tyres.shopmarketbot.ru
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ü—Ä–∏–≤–µ—Ç, –ì–æ—Å—Ç—å!" (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö Telegram)
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ (–±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)

### 2. –¢–µ—Å—Ç –≤ Telegram (production)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é
3. Mini App –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ü—Ä–∏–≤–µ—Ç, [–í–∞—à–µ –∏–º—è]!"
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
- –ú–æ–∂–Ω–æ –æ—Ñ–æ—Ä–º–ª—è—Ç—å –∑–∞–∫–∞–∑—ã
- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞

---

## üîß –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö Telegram –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ Mini App –∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ (F12) –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—ä–µ–∫—Ç–∞ Telegram
console.log('Telegram WebApp:', window.Telegram.WebApp);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
console.log('User data:', window.Telegram.WebApp.initDataUnsafe.user);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ initData (–¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ backend)
console.log('Init data:', window.Telegram.WebApp.initData);
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```javascript
{
  id: 508352361,
  first_name: "SUBA",
  username: "yourusername",
  language_code: "ru"
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
fetch('https://tyres.shopmarketbot.ru/api/auth/me')
  .then(r => r.json())
  .then(data => console.log('Authenticated user:', data));
```

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Telegram:
- [Telegram Mini Apps](https://core.telegram.org/bots/webapps)
- [BotFather Commands](https://core.telegram.org/bots#6-botfather)
- [Web App Methods](https://core.telegram.org/bots/webapps#initializing-mini-apps)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL:
- [SSL Labs](https://www.ssllabs.com/ssltest/analyze.html?d=tyres.shopmarketbot.ru)
- [WhyNoPadlock](https://www.whynopadlock.com/results/tyres.shopmarketbot.ru)

---

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:

```bash
# 1. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
curl https://tyres.shopmarketbot.ru/api/health

# 2. –í Telegram - –æ–±–Ω–æ–≤–∏—Ç–µ URL –≤ BotFather
/mybots ‚Üí –í–∞—à –±–æ—Ç ‚Üí Bot Settings ‚Üí Menu Button ‚Üí Edit ‚Üí https://tyres.shopmarketbot.ru

# 3. –í Telegram - –∑–∞–∫—Ä–æ–π—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ Mini App –∑–∞–Ω–æ–≤–æ
# –¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!
```

---

**–î–∞—Ç–∞:** 2025-11-07  
**–î–æ–º–µ–Ω:** tyres.shopmarketbot.ru  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

# üöÄ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ - –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã!

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. **IPv6 –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ IPv6 –≤ install.sh
- Nginx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ 127.0.0.1 (IPv4)
- –ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ "Connection refused" –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç

### 2. **Production —Ä–µ–∂–∏–º**
- Frontend —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ build
- Nginx —Ä–∞–∑–¥–∞—ë—Ç —Å—Ç–∞—Ç–∏–∫—É (–Ω–µ –Ω—É–∂–µ–Ω yarn start)
- Frontend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ supervisor (autostart=false)

### 3. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–∏—Å–∫–æ–≤**
- PCD (—Å–≤–µ—Ä–ª–æ–≤–∫–∞) - 5x114.3
- ET (–≤—ã–ª–µ—Ç) - –º–∏–Ω/–º–∞–∫—Å –¥–∏–∞–ø–∞–∑–æ–Ω
- DIA (—Å—Ç—É–ø–∏—á–Ω–æ–µ –æ—Ç–≤–µ—Ä—Å—Ç–∏–µ) - –º–∏–Ω/–º–∞–∫—Å
- –¶–≤–µ—Ç –¥–∏—Å–∫–∞
- –¢–∏–ø –¥–∏—Å–∫–∞ (–õ–∏—Ç–æ–π/–®—Ç–∞–º–ø–æ–≤–∞–Ω–Ω—ã–π/–ö–æ–≤–∞–Ω–Ω—ã–π)

### 4. **–ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–æ–∫**
- –ö–∞—Ä—Ç–∏–Ω–∫–∞ —Å–ª–µ–≤–∞, –∞ –Ω–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É
- –ê–∫–∫—É—Ä–∞—Ç–Ω—ã–π layout: [–§–æ—Ç–æ] [–ù–∞–∑–≤–∞–Ω–∏–µ + –ú–æ–¥–µ–ª—å] [–¶–µ–Ω–∞]
- –ö–ª–∏–∫ –ø–æ —Ñ–æ—Ç–æ ‚Üí –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –±–æ–ª—å—à–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º

### 5. **–í—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É**
- –ö–Ω–æ–ø–∫–∏ +/- –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–±–æ—Ä–∞
- –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 4 —à—Ç (–∫–æ–º–ø–ª–µ–∫—Ç)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "‚úì –î–æ–±–∞–≤–ª–µ–Ω–æ X —à—Ç –≤ –∫–æ—Ä–∑–∏–Ω—É"

---

## üì§ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é:

### –®–∞–≥ 1: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ GitHub

**–ù–∞–∂–º–∏—Ç–µ "Save to GitHub"** –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Emergent

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
cd /app
git add .
git commit -m "Production ready: –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, IPv6 –æ—Ç–∫–ª—é—á–µ–Ω, —Ñ–∏–ª—å—Ç—Ä—ã –¥–∏—Å–∫–æ–≤, –∫—Ä–∞—Å–∏–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏"
git push origin main
```

---

### –®–∞–≥ 2: –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É

```bash
sudo supervisorctl stop all
sudo rm -rf /opt/tyres-app
```

---

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ù–û–í–´–ô —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫

```bash
wget https://raw.githubusercontent.com/wrx861/tyres/main/install.sh

sudo bash install.sh \
  -d tyres.vpnsuba.ru \
  -e –≤–∞—à@email.com \
  --api-login sa56026 \
  --api-password F8Aeg3Cnkq \
  --bot-token 8290483601:AAFqXwpx1_paoekO0dt3kR46z471zlDKChI \
  --admin-id 508352361
```

**–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!**

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
sudo supervisorctl status

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# tyres-backend    RUNNING ‚úÖ
# tyres-frontend   STOPPED ‚úÖ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–∞
curl https://tyres.vpnsuba.ru/api/health
# –û—Ç–≤–µ—Ç: {"status":"healthy","database":"connected"}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ IPv6
cat /proc/sys/net/ipv6/conf/all/disable_ipv6
# –û—Ç–≤–µ—Ç: 1 (–æ—Ç–∫–ª—é—á–µ–Ω)
```

---

## üéØ –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

### ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –≤–∞—à–∏–º –∏–º–µ–Ω–µ–º (–Ω–µ "Test")
- –ö–Ω–æ–ø–∫–∞ "–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å" –µ—Å–ª–∏ –≤–∞—à ID = 508352361
- –ù–ï–¢ –∫–Ω–æ–ø–∫–∏ "Made with Emergent"

### ‚úÖ –ü–æ–∏—Å–∫ —à–∏–Ω:
- –í—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
- –ö–∞—Ä—Ç–∏–Ω–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å–ª–µ–≤–∞
- –ö—Ä–∞—Å–∏–≤—ã–π layout

### ‚úÖ –ü–æ–∏—Å–∫ –¥–∏—Å–∫–æ–≤:
- –®–∏—Ä–∏–Ω–∞, –¥–∏–∞–º–µ—Ç—Ä, –±—Ä–µ–Ω–¥
- **PCD** (5x114.3)
- **ET** (–º–∏–Ω/–º–∞–∫—Å)
- **DIA** (–º–∏–Ω/–º–∞–∫—Å)
- **–¶–≤–µ—Ç**
- **–¢–∏–ø –¥–∏—Å–∫–∞**

### ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [–§–æ—Ç–æ]  Michelin X-Ice    5,000‚ÇΩ  ‚îÇ
‚îÇ 20—à—Ç    185/60 R15                 ‚îÇ
‚îÇ         –ó–∏–º–Ω–∏–µ, –®–∏–ø–æ–≤–∞–Ω–Ω—ã–µ         ‚îÇ
‚îÇ         –ú–æ—Å–∫–≤–∞                     ‚îÇ
‚îÇ         –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: [- 4 +]        ‚îÇ
‚îÇ         [–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É]       ‚îÇ
‚îÇ         ‚úì –î–æ–±–∞–≤–ª–µ–Ω–æ 4 —à—Ç –≤ –∫–æ—Ä–∑–∏–Ω—É ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞:
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
- –†–∞—Å—á—ë—Ç —Å—É–º–º—ã
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

### ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:
- –û–∂–∏–¥–∞—é—â–∏–µ –∑–∞–∫–∞–∑—ã
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ü–µ–Ω–∫–∏

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
```nginx
server {
    server_name tyres.vpnsuba.ru;

    location /api {
        proxy_pass http://127.0.0.1:8001;  # IPv4 only
        # ... headers
    }

    location / {
        root /opt/tyres-app/frontend/build;  # Static files
        try_files $uri $uri/ /index.html;
    }

    listen 443 ssl;
    # ... SSL config
}
```

### Supervisor:
```ini
[program:tyres-backend]
autostart=true   # –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è ‚úÖ

[program:tyres-frontend]
autostart=false  # –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è ‚úÖ
```

### IPv6:
```bash
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
```

---

## üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ü—Ä–æ–±–ª–µ–º–∞: Nginx –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IPv6
cat /proc/sys/net/ipv6/conf/all/disable_ipv6
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 1

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
grep "127.0.0.1" /etc/nginx/sites-available/tyres-app
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: proxy_pass http://127.0.0.1:8001;

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx
sudo systemctl restart nginx
```

### –ü—Ä–æ–±–ª–µ–º–∞: Frontend –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ build —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la /opt/tyres-app/frontend/build/

# –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–±–µ—Ä–∏—Ç–µ
cd /opt/tyres-app/frontend
yarn build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ nginx
sudo systemctl restart nginx
```

### –ü—Ä–æ–±–ª–µ–º–∞: Backend –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo supervisorctl status tyres-backend

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -f /var/log/tyres-backend.err.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
sudo supervisorctl restart tyres-backend
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç:

- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ GitHub (Save to GitHub)
- [ ] –£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (rm -rf /opt/tyres-app)
- [ ] –°–∫–∞—á–∞–Ω –ù–û–í–´–ô install.sh
- [ ] –ó–∞–ø—É—â–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- [ ] tyres-backend —Å—Ç–∞—Ç—É—Å RUNNING
- [ ] tyres-frontend —Å—Ç–∞—Ç—É—Å STOPPED
- [ ] IPv6 –æ—Ç–∫–ª—é—á–µ–Ω (–∑–Ω–∞—á–µ–Ω–∏–µ = 1)
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (curl –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200)
- [ ] Backend API —Ä–∞–±–æ—Ç–∞–µ—Ç (/api/health)
- [ ] –ù–ï–¢ –∫–Ω–æ–ø–∫–∏ Emergent
- [ ] –ö–∞—Ä—Ç–∏–Ω–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –ù–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–∏—Å–∫–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –í—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É"
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ (–µ—Å–ª–∏ ID —Å–æ–≤–ø–∞–¥–∞–µ—Ç)

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É –≤–∞—Å –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–µ–µ production –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ –≤—Å–µ–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏!

**–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!** üöÄ
